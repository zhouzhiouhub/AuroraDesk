ä¸‹é¢ç»™ä½ ä¸¤å¥—ç›®å½•ç»“æ„ï¼š

1. ä½ ç°åœ¨ç”¨çš„\*\*å•é¡¹ç›®ï¼ˆSingle-project WinUI 3 + MSIXï¼‰\*\*æ ‡å‡†ç»“æ„ï¼›
2. åç»­è¦æ‰©å±•æ—¶ï¼Œæ¨èçš„**å¤šé¡¹ç›®åˆ†å±‚ç»“æ„**ã€‚ä¸¤å¥—éƒ½é™„äº†â€œæ¯ä¸ªæ–‡ä»¶å¤¹æ”¾ä»€ä¹ˆâ€çš„è¯´æ˜ã€‚

---

# âœ… æ–¹æ¡ˆä¸€ï¼šå•é¡¹ç›®ï¼ˆä½ å½“å‰çš„åšæ³•ï¼‰

```
AuroraDesk.sln
â””â”€ AuroraDesk/                          # å•é¡¹ç›® WinUI 3ï¼ˆå«æ‰“åŒ…ï¼‰
   â”œâ”€ App.xaml
   â”œâ”€ App.xaml.cs                       # å¯åŠ¨/æŒ‚åˆ°æ¡Œé¢/å¤šå±çª—å£åˆ›å»º
   â”œâ”€ MainWindow.xaml                   # å¯ä½œä¸ºè®¾ç½®/è°ƒè¯•çª—å£
   â”œâ”€ MainWindow.xaml.cs
   â”œâ”€ app.manifest
   â”œâ”€ Package.appxmanifest              # å•é¡¹ç›®æ¨¡æ¿é‡Œä¼šåœ¨åŒé¡¹ç›®å†…
   â”œâ”€ AuroraDesk.csproj
   â”‚
   â”œâ”€ Core/                             # ä¸ç³»ç»Ÿ/Win32äº¤äº’ & å¤šå±
   â”‚  â”œâ”€ NativeMethods.cs               # P/Invoke: FindWindow/SetParent/...
   â”‚  â”œâ”€ DesktopHost.cs                 # GetWorkerW() åˆ›å»º/å®šä½ WorkerW
   â”‚  â”œâ”€ Win32Window.cs                 # è·å–çª—å£å¥æŸ„/æŒ‚åˆ°çˆ¶çª—å£
   â”‚  â”œâ”€ MonitorManager.cs              # EnumDisplayMonitors/GetMonitorInfo
   â”‚  â”œâ”€ ExplorerWatcher.cs             # (å¯é€‰) ç›‘å¬ Explorer é‡å¯
   â”‚  â””â”€ FullscreenDetector.cs          # (å¯é€‰) å‰å°å…¨å±æ£€æµ‹
   â”‚
   â”œâ”€ Sources/                          # å£çº¸æ¥æºï¼ˆç­–ç•¥/æ¸²æŸ“è½½ä½“ï¼‰
   â”‚  â”œâ”€ IWallpaperSource.cs
   â”‚  â”œâ”€ VideoSource.cs                 # MediaPlayerElement + MF
   â”‚  â”œâ”€ WebSource.cs                   # WebView2 (Composition/é€æ˜å¯é€‰)
   â”‚  â”œâ”€ ShaderSource.cs                # (å¯é€‰) D3D11/HLSL
   â”‚  â””â”€ VisualizerSource.cs            # (å¯é€‰) éŸ³é¢‘å¯è§†åŒ–
   â”‚
   â”œâ”€ Services/                         # ä¸šåŠ¡æœåŠ¡
   â”‚  â”œâ”€ ProfileManager.cs              # é¢„è®¾/é…ç½®å­˜å–(JSON)
   â”‚  â”œâ”€ SettingsService.cs             # åº”ç”¨è®¾ç½®ï¼ˆæŒä¹…åŒ–ï¼‰
   â”‚  â”œâ”€ WallpaperService.cs            # ç»Ÿä¸€æ§åˆ¶ Start/Pause/Resize
   â”‚  â””â”€ Logging.cs                     # Serilog åˆå§‹åŒ–
   â”‚
   â”œâ”€ Models/                           # æ•°æ®æ¨¡å‹
   â”‚  â”œâ”€ WallpaperProfile.cs
   â”‚  â”œâ”€ MonitorConfig.cs
   â”‚  â””â”€ Enums.cs
   â”‚
   â”œâ”€ UI/                               # UI è§†å›¾/æ§ä»¶/æ ·å¼
   â”‚  â”œâ”€ Views/
   â”‚  â”‚  â”œâ”€ SettingsPage.xaml
   â”‚  â”‚  â””â”€ SettingsPage.xaml.cs
   â”‚  â”œâ”€ Controls/                      # (å¯é€‰) è‡ªå®šä¹‰æ§ä»¶
   â”‚  â””â”€ Styles/                        # å…¨å±€æ ·å¼/èµ„æºå­—å…¸
   â”‚     â””â”€ Theme.xaml
   â”‚
   â”œâ”€ Assets/                           # é™æ€èµ„æº
   â”‚  â”œâ”€ Icons/                         # .ico/.png
   â”‚  â”œâ”€ Shaders/                       # .hlsl
   â”‚  â”œâ”€ Media/                         # ç¤ºä¾‹è§†é¢‘/GIF
   â”‚  â””â”€ Web/                           # æœ¬åœ°ç½‘é¡µèµ„æº(å¦‚å¯ç¦»çº¿åŠ è½½)
   â”‚
   â”œâ”€ Logs/                             # è¿è¡Œæ—¥å¿—ï¼ˆSerilog è¾“å‡ºç›®å½•ï¼Œè¿è¡Œæ—¶ç”Ÿæˆï¼‰
   â””â”€ README.md
```

> æç¤º
>
> * **App.xaml.cs**ï¼šå»ºè®®æ”¾ä½ çš„å¯åŠ¨æµç¨‹ï¼ˆæ‰¾ WorkerW â†’ éå†æ˜¾ç¤ºå™¨ â†’ ä¸ºæ¯å±åˆ›å»º Host çª—å£å¹¶ SetParentï¼‰ã€‚
> * **ä¸è¦**å¼•å…¥ WPF/WinForms çš„ targetsï¼ˆé¿å… `PresentationCore/PresentationFramework` æŠ¥é”™ï¼‰ã€‚
> * NuGet ä¸»è¦ç”¨ï¼š`Microsoft.Web.WebView2`ã€`Microsoft.WindowsAppSDK`ã€(å¯é€‰)`Serilog`ã€`Vortice.Windows`ã€`NAudio`ã€‚

---

# ğŸš€ æ–¹æ¡ˆäºŒï¼šå¤šé¡¹ç›®åˆ†å±‚ï¼ˆæ›´æ˜“æ‰©å±•/æµ‹è¯•ï¼‰

```
AuroraDesk.sln
â”œâ”€ AuroraDesk/                          # WinUI 3 å¯æ‰§è¡Œï¼ˆUIå£³/æ‰˜ç›˜/è®¾ç½®ï¼‰
â”‚  â”œâ”€ App.xaml / App.xaml.cs
â”‚  â”œâ”€ MainWindow.xaml / .cs
â”‚  â”œâ”€ UI/ (Views, Controls, Styles)
â”‚  â”œâ”€ Assets/
â”‚  â””â”€ AuroraDesk.csproj   (ä»…å¼•ç”¨ Core å’Œ Sources)
â”‚
â”œâ”€ AuroraDesk.Core/                     # ç³»ç»Ÿ/å¹³å°å±‚ï¼ˆçº¯é€»è¾‘/Interopï¼‰
â”‚  â”œâ”€ Core/ (NativeMethods, DesktopHost, Win32Window, MonitorManager, ...)
â”‚  â”œâ”€ Services/ (ProfileManager, SettingsService, WallpaperService, ...)
â”‚  â”œâ”€ Models/ (WallpaperProfile, MonitorConfig, Enums)
â”‚  â””â”€ AuroraDesk.Core.csproj
â”‚
â”œâ”€ AuroraDesk.Sources/                  # å„ç±»å£çº¸æ¥æºå®ç°ï¼ˆå¯ç‹¬ç«‹æµ‹è¯•/æ›¿æ¢ï¼‰
â”‚  â”œâ”€ IWallpaperSource.cs
â”‚  â”œâ”€ VideoSource.cs
â”‚  â”œâ”€ WebSource.cs
â”‚  â”œâ”€ ShaderSource.cs
â”‚  â”œâ”€ VisualizerSource.cs
â”‚  â””â”€ AuroraDesk.Sources.csproj
â”‚
â”œâ”€ AuroraDesk.Tests/                    # å•å…ƒæµ‹è¯•ï¼ˆå¯é€‰ï¼‰
â”‚  â””â”€ AuroraDesk.Tests.csproj
â”‚
â””â”€ Installer/                           # æ‰“åŒ…è„šæœ¬/CIï¼ˆå¯é€‰ï¼‰
   â”œâ”€ InnoSetup/ or MSIX Pipeline
   â””â”€ build.ps1
```

**å¼•ç”¨å…³ç³»**ï¼š`AuroraDesk` â†’ ä¾èµ– `AuroraDesk.Core`ã€`AuroraDesk.Sources`ï¼›
`AuroraDesk.Sources` â†’ å¯ä¾èµ– `AuroraDesk.Core`ï¼ˆæ‹¿åˆ°é€šç”¨ç±»å‹ï¼‰ï¼›
æµ‹è¯•é¡¹ç›®å¯åˆ†åˆ«å¼•ç”¨ Core/Sourcesã€‚

---

## å‘½åè§„èŒƒ & å°å»ºè®®

* æ–‡ä»¶åä¸ç±»åä¸€è‡´ï¼ˆ`DesktopHost.cs` å†…åªæ”¾ `DesktopHost`ï¼‰ã€‚
* **Interop**ï¼ˆP/Invokeï¼‰é›†ä¸­åœ¨ `Core/NativeMethods.cs`ï¼Œä¾¿äºå®¡è®¡ã€‚
* è¿è¡Œæ—¶æ•°æ®ï¼ˆé¢„è®¾/ç¼“å­˜/æ—¥å¿—ï¼‰ç»Ÿä¸€è½åˆ°ï¼š
  `%LOCALAPPDATA%\AuroraDesk\Profiles`ã€`Logs` ç­‰ç›®å½•ï¼ˆç”¨ `Environment.GetFolderPath`ï¼‰ã€‚
* èµ„æºï¼ˆå›¾æ ‡/ç€è‰²å™¨/ç¤ºä¾‹åª’ä½“ï¼‰éƒ½æ”¾ **Assets/**ï¼Œä¾¿äºæ‰“åŒ…æ—¶ç»Ÿä¸€åŒ…å«/æ’é™¤ã€‚
* ä¸æ··ç”¨ WPF/WinFormsï¼›**WinUI 3** é‡Œå¤šå±ç”¨ `EnumDisplayMonitors` + `GetMonitorInfo`ï¼ˆæˆ‘ä»¬å·²ç»™å‡º `MonitorManager`ï¼‰ã€‚

---

## æœ€å°å¿…é¡»æ–‡ä»¶ï¼ˆèƒ½è·‘èµ·æ¥çš„æ ¸â¼¼ï¼‰

* `App.xaml` / `App.xaml.cs`
* `Core/NativeMethods.cs`ã€`Core/DesktopHost.cs`ã€`Core/Win32Window.cs`ã€`Core/MonitorManager.cs`
* `Sources/WebSource.cs` æˆ– `Sources/VideoSource.cs` å…¶ä¸€
* `MainWindow.xaml`ï¼ˆå¯åªæœ‰ä¸€ä¸ªæŒ‰é’®æˆ–ç©ºé¡µï¼‰

---

éœ€è¦çš„è¯ï¼Œæˆ‘å¯ä»¥æŠŠä½ **å½“å‰è§£å†³æ–¹æ¡ˆ**æŒ‰ä¸Šé¢çš„å•é¡¹ç›®ç»“æ„â€œå¯¹å·å…¥åº§â€ï¼Œå‘Šè¯‰ä½ æ¯ä¸ªæ–‡ä»¶æ”¾åˆ°å“ªï¼Œå¹¶ç»™ä¸€ä¸ªâ€œå®Œæˆç‰ˆ `App.xaml.cs`â€æ–¹ä¾¿ä½ ç›´æ¥å¤åˆ¶è¿è¡Œã€‚ä½ è¦æˆ‘ç›´æ¥è´´â€œå®Œæˆç‰ˆå¯åŠ¨ä»£ç â€å—ï¼Ÿ
