# 项目结构（与当前仓库对齐 | 单一文档入口）

本页描述 AuroraDesk 当前实际目录与职责，便于定位代码与维护文档。

---

## 目录总览

```text
AuroraDesk.sln
├─ AuroraDesk/
│  └─ AuroraDesk/
│     ├─ App.xaml
│     ├─ App.xaml.cs
│     ├─ app.manifest
│     ├─ Package.appxmanifest
│     ├─ AuroraDesk.csproj
│     │
│     ├─ Assets/
│     │  ├─ Square44x44Logo.*
│     │  ├─ Square150x150Logo.*
│     │  ├─ Wide310x150Logo.*
│     │  ├─ SplashScreen.*
│     │  └─ LockScreenLogo.*
│     │
│     ├─ Controls/
│     │  ├─ LogoShowcase.xaml
│     │  └─ LogoShowcase.xaml.cs
│     │
│     ├─ Core/
│     │  ├─ DesktopHost.cs
│     │  ├─ NativeMethods.cs
│     │  ├─ WallpaperManager.cs
│     │  └─ Win32Window.cs
│     │
│     ├─ Models/
│     │  └─ WallpaperItem.cs
│     │
│     ├─ Managers/
│     │
│     ├─ Sources/
│     │
│     ├─ Utilities/
│     │  └─ IconGenerator.cs
│     │
│     ├─ Library/
│     │  └─ wallpapers/
│     │
│     ├─ bin/
│     └─ obj/
│
├─ AuroraDesk.Tests/
│  ├─ AuroraDesk.Tests.csproj
│  └─ UnitTest1.cs
│
└─ docs/
   ├─ 开发文档.md
   ├─ 项目结构.md
   ├─ AuroraDesk_开发详细文档.md
   ├─ 应用图标配置说明.md
   └─ unit-testing.md
```

---

## 模块与职责

- Core：
  - DesktopHost：WorkerW/桌面挂载、宿主窗口管理
  - Win32Window：Win32 窗口封装/句柄操作
  - NativeMethods：P/Invoke 声明集中
  - WallpaperManager：壁纸生命周期协调（当前以核心挂载/管理为主）
- Controls：演示控件与后续 UI 组件
- Models：数据模型（如 `WallpaperItem`）
- Sources：壁纸来源实现的归属目录（当前为空，后续将加入 Video/Web/Shader 等）
- Utilities：通用工具与辅助逻辑
- Assets：应用包图标与启动页资源
- Library：示例壁纸素材库（便于开发与演示）
- Tests：单元测试项目 `AuroraDesk.Tests/`，引用主项目，专注纯逻辑与可测边界

---

## 测试项目约定

- 工程引用：`AuroraDesk.Tests` → `AuroraDesk/AuroraDesk/AuroraDesk.csproj`
- 测试命名：与被测类同名后缀 `Tests`（如 `WallpaperManagerTests`）
- 关注点：
  - 核心逻辑与边界条件（避免 UI 依赖）；
  - 对 Win32 交互使用接口抽象/包装，便于替身（mock）
- 运行：在解决方案根执行 `dotnet test` 或 IDE 测试面板

---

## 清理与迁移（历史重复文件）

仓库根目录仍保留了与 `AuroraDesk/Core/` 重复或历史相关的文件：`DesktopHost.cs`、`NativeMethods.cs`、`Win32Window.cs`，以及一个独立的 `MonitorManager.cs`。

- 以 `AuroraDesk/Core/` 为权威来源，按以下策略统一：
  - 若根级文件与 `Core/` 中实现等价：以 `Core/` 版本为准，删除根级重复文件。
  - 若存在功能差异：将差异合并入 `Core/` 对应文件后，再删除根级版本。
  - `MonitorManager.cs`：如仍需使用，请迁移至 `AuroraDesk/Core/` 并纳入文档与测试；如不再使用，请删除。
- 遵循移除策略：删除即彻底删除，不保留死代码/桩/临时开关；同步更新文档、配置与构建脚本。

---

## 文档维护约定

- 开发相关文档统一位于仓库根 `docs/`；
- 文件与目录如有新增/重命名/迁移，请同步更新：
  - `docs/项目结构.md`
  - 相关开发文档/详细文档
  - 示例与截图（如涉及 UI/Assets）
- 提交信息遵循 Conventional Commits（feat|fix|docs|style|refactor|test|chore）。
