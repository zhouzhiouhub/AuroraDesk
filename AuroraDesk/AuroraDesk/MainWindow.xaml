<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="AuroraDesk.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:AuroraDesk.Controls"
    xmlns:local="using:AuroraDesk"
    xmlns:models="using:AuroraDesk.Models"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="AuroraDesk">

    <Window.SystemBackdrop>
        <MicaBackdrop />
    </Window.SystemBackdrop>

    <Grid Padding="0" RowDefinitions="Auto,*" ColumnDefinitions="*">
        <Grid.Resources>
            <!-- 标题字体样式：可在此统一调整大小/粗细/颜色等 -->
            <Style x:Key="TitleTextStyle" TargetType="TextBlock">
                <Setter Property="FontSize" Value="18"/>
                <Setter Property="FontWeight" Value="SemiBold"/>
                <Setter Property="Foreground" Value="{ThemeResource AppAccentBrush}"/>
            </Style>
        </Grid.Resources>
        <!-- 自绘标题栏：左侧放置较大的应用图标 + 标题 -->
        <Grid x:Name="AppTitleBar" Height="48" Background="Transparent" Padding="16,0,16,0">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Spacing="8">
                <Image Source="ms-appx:///Assets/Square44x44Logo.scale-200.png"
                       Width="32" Height="32"
                       VerticalAlignment="Center"/>
                <TextBlock Text="AuroraDesk" Style="{StaticResource TitleTextStyle}" VerticalAlignment="Center"/>
            </StackPanel>
        </Grid>

        <Grid Grid.Row="1" Padding="16">
            <Grid.Resources>
                <ItemsPanelTemplate x:Key="WrapPanelTemplate">
                    <ItemsWrapGrid Orientation="Horizontal" ItemWidth="260" ItemHeight="180"/>
                </ItemsPanelTemplate>

                <Style x:Key="GalleryItemStyle" TargetType="ListViewItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                    <Setter Property="VerticalContentAlignment" Value="Stretch"/>
                    <Setter Property="Margin" Value="8"/>
                </Style>
            </Grid.Resources>

            <ListView x:Name="WallpaperList"
                      SelectionMode="Single"
                      IsItemClickEnabled="True"
                      ItemClick="WallpaperList_ItemClick"
                      ItemsPanel="{StaticResource WrapPanelTemplate}"
                      ItemContainerStyle="{StaticResource GalleryItemStyle}">
                <ListView.ItemTemplate>
                    <DataTemplate x:DataType="models:WallpaperItem">
                        <StackPanel>
                            <Image Source="{x:Bind ThumbnailPath}"
                                   Stretch="UniformToFill" Height="120"/>
                            <TextBlock Text="{x:Bind Title}"
                                       TextTrimming="CharacterEllipsis"/>
                            <TextBlock Text="{x:Bind Description}"
                                       Opacity="0.7" FontSize="12"
                                       TextTrimming="CharacterEllipsis"/>
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </Grid>
    </Grid>
</Window>
